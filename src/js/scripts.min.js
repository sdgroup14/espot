(function() {
  'use strict';

  angular
    .module('espot', [
      'ui.router',
      'ngAnimate',
      'espot.index',
      'espot.search',
      'espot.kitchen',
      'espot.institution',
      'espot.institution-menu'
    ])
    .controller('AppCtrl', AppCtrl)
    .config(Config);

  AppCtrl.$inject = ['$scope', '$rootScope', '$timeout'];

  function AppCtrl($scope, $rootScope, $timeout) {

    //         $timeout(function(){
    //    $('nav').removeClass('nav-show');
    //   $('.logo').removeClass('start-page-logo');
    //   $('.page-title').removeClass('active');
    //   }, 500);


    // $rootScope.$on('$locationChangeStart', function(evt) {
    //   console.log(evt);
    // });

    //     $rootScope.$on('$locationChangeSuccess', function(evt) {
    //   $timeout(function(){
    //    $('nav').removeClass('nav-show');
    //   $('.logo').removeClass('start-page-logo');
    //   $('.page-title').removeClass('active');
    //   }, 500);
    // });


  };

  Config.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider'];

  function Config($stateProvider, $urlRouterProvider, $locationProvider) {
$urlRouterProvider.otherwise('/');
    $stateProvider
      .state('root', {
        url: '/',
        // templateUrl: '../views/pages/index/s1.html',
        controller: AppCtrl,
        redirectTo: 'index'
      });

    
    $locationProvider.html5Mode({
      enabled: true,
      requireBase: false
    });
  };

})();
(function() {
  'use strict';

  angular
    .module('espot.index', [
      'ui.router',
      'ngAnimate'
    ])
    .config(['$stateProvider', '$urlRouterProvider', config])
    .controller('IndexCtrl', IndexCtrl);

  IndexCtrl.$inject = ['$scope', '$rootScope', '$timeout'];

  function IndexCtrl($scope, $rootScope, $timeout) {
    
    $timeout(function() {
      $('.page-title').removeClass('active');
      $('nav').removeClass('nav-show');
      $('.logo').removeClass('start-page-logo');
    }, 500);


    // $rootScope.$on('$locationChangeStart', function(evt) {
    //   $('nav').removeClass('nav-show');
    //   $('.logo').removeClass('start-page-logo');
    //   $('.page-title').removeClass('active');
    // });

        $rootScope.$on('$locationChangeSuccess', function(evt) {
          console.log(evt);
      // $timeout(function(){
      //  $('nav').removeClass('nav-show');
      // $('.logo').removeClass('start-page-logo');
      // $('.page-title').removeClass('active');
      // }, 1);
    });

           $rootScope.$on('$locationChangeSuccess', function(evt) { 
    });



  };

  function config($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');
    $stateProvider
      .state('index', {
        url: '/',
        templateUrl: '../views/pages/index.html',
        controller: IndexCtrl,
      })
  };
})();
(function() {
  'use strict';

  angular
    .module('espot.institution-menu', [
      'ui.router',
       'ngAnimate'])
    .config(['$stateProvider', '$urlRouterProvider', config])
    .controller('InstitutionMenuCtrl', InstitutionMenuCtrl);

  InstitutionMenuCtrl.$inject = ['$scope', '$rootScope', '$timeout', '$http'];

  function InstitutionMenuCtrl($scope, $rootScope, $timeout, $http) {
    $('.institution-content').height($(window).height() - 110);


    $timeout(function(){
      $rootScope.pageTitle = "Меню";
      $('.nav-2').addClass('nav-show');
      $('.logo').addClass('start-page-logo');
      $('.page-title').addClass('active');
      }, 500);


    $rootScope.$on('$locationChangeStart', function(evt) {
      $('.page-title').removeClass('active');

    });

    $rootScope.$on('$locationChangeSuccess', function(evt) {
      $timeout(function(){
      $('.nav-2').addClass('nav-show');
      $('.logo').addClass('start-page-logo');
      $('.page-title').addClass('active');

      }, 500);
    });

  //     $scope.isActive = false;
  // $scope.activeButton = function() {
  //   $scope.isActive = !$scope.isActive;
  // }  

  $('.inst-menu-item').on('click', function(){
    $(this).toggleClass('active');
  })



    // $scope.dataKitchen = [];

//     $http({
//       method: 'get',
//       url: '../data/kitchen.php'
//     }).then(function(response) {
//       $scope.dataKitchen = response.data;
// // console.log($scope.dataKitchen[0]);
// // console.log($scope.dataKitchen[$index].items);
//     }, function(error) {
//       console.log(error);
//     });

    // $scope.getTimes = function(n) {
    //   return new Array(n);
    // };


  };

  function config($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');
    $stateProvider
      .state('institution-menu', {
        url: '/institution-menu',
        templateUrl: '../views/pages/institution-menu.html',
        controller: InstitutionMenuCtrl
      })
  };
})();
(function() {
  'use strict';

  angular
    .module('espot.institution', [
      'ui.router',
       'ngAnimate'])
    .config(['$stateProvider', '$urlRouterProvider', config])
    .controller('InstitutionCtrl', InstitutionCtrl);

  InstitutionCtrl.$inject = ['$scope', '$rootScope', '$timeout', '$http'];

  function InstitutionCtrl($scope, $rootScope, $timeout, $http) {
    $('.institution-content').height($(window).height() - 110);


    $timeout(function(){
      $rootScope.pageTitle = "О ЗАВЕДЕНИИ";
      $('.nav-2').addClass('nav-show');
      $('.logo').addClass('start-page-logo');
      $('.page-title').addClass('active');
      }, 500);


    $rootScope.$on('$locationChangeStart', function(evt) {
      $('.page-title').removeClass('active');

    });

    $rootScope.$on('$locationChangeSuccess', function(evt) {
      $timeout(function(){
      $('.nav-2').addClass('nav-show');
      $('.logo').addClass('start-page-logo');
      $('.page-title').addClass('active');

      }, 500);
    });



    // $scope.dataKitchen = [];

//     $http({
//       method: 'get',
//       url: '../data/kitchen.php'
//     }).then(function(response) {
//       $scope.dataKitchen = response.data;
// // console.log($scope.dataKitchen[0]);
// // console.log($scope.dataKitchen[$index].items);
//     }, function(error) {
//       console.log(error);
//     });

    // $scope.getTimes = function(n) {
    //   return new Array(n);
    // };


  };

  function config($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');
    $stateProvider
      .state('institution', {
        url: '/institution',
        templateUrl: '../views/pages/institution.html',
        controller: InstitutionCtrl
      })
  };
})();
(function() {
  'use strict';

  angular
    .module('espot.kitchen', [
      'ui.router',
      'ngAnimate'
    ])
    .config(['$stateProvider', '$urlRouterProvider', config])
    .controller('KitchenCtrl', KitchenCtrl);

  KitchenCtrl.$inject = ['$scope', '$rootScope', '$timeout', '$http'];

  function KitchenCtrl($scope, $rootScope, $timeout, $http) {
    $('.kitchen-page-result').height($(window).height() - 190);


    $timeout(function() {
      $rootScope.pageTitle = "ТИП КУХНИ";
      $('nav').addClass('nav-show');
      $('.logo').addClass('start-page-logo');
      $('.page-title').addClass('active');
    }, 500);


    $rootScope.$on('$locationChangeStart', function(evt) {
      $('.page-title').removeClass('active');

    });

    $rootScope.$on('$locationChangeSuccess', function(evt) {
      $timeout(function() {
        $('nav').addClass('nav-show');
        $('.logo').addClass('start-page-logo');
        $('.page-title').addClass('active');

      }, 500);
    });



    $scope.dataKitchen = [];

    $http({
      method: 'get',
      url: 'https://api.icreations.agency/kitchen'
    }).then(function(response) {
      $scope.dataKitchen = response.data;
      console.log(response);
    }, function(error) {
      console.log('Ошибка:' + error);
    });

    $scope.getTimes = function(n) {
      return new Array(n);
    };


  };

  function config($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');
    $stateProvider
      .state('kitchen', {
        url: '/kitchen',
        templateUrl: '../views/pages/kitchen.html',
        controller: KitchenCtrl
      })
  };
})();
(function() {
  'use strict';

  angular
    .module('espot.search', [
      'ui.router',
      'ngAnimate'
    ])
    .config(['$stateProvider', '$urlRouterProvider', config])
    .controller('SearchCtrl', SearchCtrl);

  SearchCtrl.$inject = ['$scope', '$rootScope', '$timeout', '$http'];

  function SearchCtrl($scope, $rootScope, $timeout, $http) {
    $('.search-page-result').height($(window).height() - 190);


    $timeout(function() {
      $rootScope.pageTitle = "поиск";
      $('nav').addClass('nav-show');
      $('.logo').addClass('start-page-logo');
      $('.page-title').addClass('active');
    }, 500);


    $rootScope.$on('$locationChangeStart', function(evt) {
      $('.page-title').removeClass('active');

    });

    $rootScope.$on('$locationChangeSuccess', function(evt) {
      $timeout(function() {
        $('nav').addClass('nav-show');
        $('.logo').addClass('start-page-logo');
        $('.page-title').addClass('active');
      }, 500);
    });

    $scope.dataSearch = [];

    $http({
      method: 'get',
      url: '../data/search.php'
    }).then(function(response) {
      $scope.dataSearch = response.data;

    }, function(error) {
      console.log(error);
    });

    $scope.getTimes = function(n) {
      return new Array(n);
    };

  };

  function config($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');
    $stateProvider
      .state('search', {
        url: '/search',
        templateUrl: '../views/pages/search.html',
        controller: SearchCtrl
      })
  };
})();
$(document).on('click', function(e) {
  if (!$(e.target).closest(".search_field").length && $('.search_field').hasClass('show-search_field')) {
    $('#findCity_input').blur();
    $('.search_field').removeClass('show-search_field');
  }
});

$('body').on('click', '.btn-place-search', function() {
  setTimeout(function() {
    $('.search_field').addClass('show-search_field');
    setTimeout(function() {
      $('#findCity_input').focus();
    }, 333)
  }, 1)
});

$('body').on('click', '.btn-place-next', function(){
  console.log('123');
  $('.first-step-auth, .second-step-auth').addClass('active');
});